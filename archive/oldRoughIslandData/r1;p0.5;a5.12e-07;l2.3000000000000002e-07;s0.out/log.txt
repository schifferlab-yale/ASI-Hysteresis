//mumax 3.10 [windows_amd64 go1.11.6(gc) CUDA-11.0]
//GPU info: NVIDIA GeForce RTX 3090(24575MB), CUDA Driver 11.7, cc=8.6, using cc=80 PTX
//(c) Arne Vansteenkiste, Dynamat LAB, Ghent University, Belgium
//This is free software without any warranty. See license.txt
//********************************************************************//
//  If you use mumax in any work or publication,                      //
//  we kindly ask you to cite the references in references.bib        //
//********************************************************************//
//output directory: r1;p0.5;a5.12e-07;l2.3000000000000002e-07;s0.out/
randSeed(0)
ThermSeed(0)
resolution := 2e-09
zResolution := 5e-09
a := 5.12e-07
gridSize := 512
gridDepth := 5
SetCellsize(resolution, resolution, zResolution)
SetGridsize(gridSize, gridSize, gridDepth)
SetPBC(16, 16, 0)
//resizing...
Msat = 700e3
Aex = 13e-12
alpha = 0.2
Bmax := 0.1
Bstep := Bmax / 500.0
TableAdd(B_ext)
TableAdd(m_full)
islandWidth := 8e-08
islandLength := 2.3000000000000002e-07
ellipseConstant := 5.7500000000000005e-08
hIsland := rect(islandLength-2*ellipseConstant, islandWidth)
hIsland = hIsland.add(ellipse(ellipseConstant*2, islandWidth).transl(islandLength/2-ellipseConstant, 0, 0))
hIsland = hIsland.add(ellipse(ellipseConstant*2, islandWidth).transl(-islandLength/2+ellipseConstant, 0, 0))
hIsland = hIsland.add(rect(8.619800655582358e-09, 8.619800655582358e-09).transl(-8.341917501457458e-08, 3.57056404454896e-08, 0))
hIsland = hIsland.sub(rect(4.612747842299654e-09, 4.612747842299654e-09).transl(6.582175608311356e-09, 4e-08, 0))
hIsland = hIsland.add(rect(5.777093624439196e-09, 5.777093624439196e-09).transl(-1.3976071698794252e-08, -4e-08, 0))
hIsland = hIsland.add(rect(1.0634796649497825e-09, 1.0634796649497825e-09).transl(-9.229480047263555e-08, -3.184515929412831e-08, 0))
hIsland = hIsland.sub(rect(1.6509936362120314e-09, 1.6509936362120314e-09).transl(-6.732437226675279e-08, 3.9411822030725364e-08, 0))
hIsland = hIsland.add(rect(9.305108721534552e-09, 9.305108721534552e-09).transl(-1.0532233879437733e-07, -2.220943963601662e-08, 0))
hIsland = hIsland.add(rect(2.8731564080774507e-09, 2.8731564080774507e-09).transl(-4.038320701330158e-08, 4e-08, 0))
hIsland = hIsland.add(rect(9.744104960332018e-09, 9.744104960332018e-09).transl(5.8513882450337434e-08, 3.999378124741329e-08, 0))
hIsland = hIsland.add(rect(2.0426694775495412e-09, 2.0426694775495412e-09).transl(-5.673397713435198e-08, -4e-08, 0))
hIsland = hIsland.add(rect(8.93776040891838e-09, 8.93776040891838e-09).transl(1.0334852460461405e-07, -2.4139860072472174e-08, 0))
hIsland = hIsland.add(rect(3.976000323775414e-09, 3.976000323775414e-09).transl(-6.222844232902587e-08, -3.986452268344683e-08, 0))
hIsland = hIsland.add(rect(7.11744813286289e-09, 7.11744813286289e-09).transl(3.95803588590839e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(7.406509648915467e-09, 7.406509648915467e-09).transl(3.304035007826171e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(6.41021336440959e-09, 6.41021336440959e-09).transl(5.746054892573786e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(7.548657773695963e-09, 7.548657773695963e-09).transl(-5.8250422384998124e-08, -3.999659337474935e-08, 0))
hIsland = hIsland.sub(rect(7.690548590215637e-09, 7.690548590215637e-09).transl(-1.4512727070611247e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(6.286820329750291e-09, 6.286820329750291e-09).transl(-3.5354177156364407e-08, 4e-08, 0))
hIsland = hIsland.add(rect(9.271422633380859e-09, 9.271422633380859e-09).transl(-1.3616865815168814e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(5.843620637986433e-09, 5.843620637986433e-09).transl(8.306233113321183e-08, 3.582991774900179e-08, 0))
hIsland = hIsland.add(rect(6.54605134978295e-09, 6.54605134978295e-09).transl(-7.528301230734924e-08, -3.803897377453929e-08, 0))
hIsland = hIsland.add(rect(3.430446870684178e-10, 3.430446870684178e-10).transl(-1.015074853664575e-07, 2.574468782985492e-08, 0))
hIsland = hIsland.sub(rect(6.734543667736883e-09, 6.734543667736883e-09).transl(-9.420928851594453e-08, 3.0787447512807626e-08, 0))
hIsland = hIsland.sub(rect(5.644522695631518e-09, 5.644522695631518e-09).transl(8.890097763091292e-08, 3.35086965711201e-08, 0))
hIsland = hIsland.add(rect(7.894037711715744e-09, 7.894037711715744e-09).transl(-3.501502887323503e-08, -4e-08, 0))
hIsland = hIsland.add(rect(2.3997773773634446e-09, 2.3997773773634446e-09).transl(4.0395162373367475e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(6.951859501450052e-09, 6.951859501450052e-09).transl(-3.884339788762458e-08, 4e-08, 0))
hIsland = hIsland.add(rect(3.6797961022046356e-10, 3.6797961022046356e-10).transl(-6.916467858828484e-08, -3.916827711228071e-08, 0))
hIsland = hIsland.sub(rect(6.948378073483521e-09, 6.948378073483521e-09).transl(-6.257463525470337e-08, -3.984391825331899e-08, 0))
hIsland = hIsland.sub(rect(2.2554146256135823e-09, 2.2554146256135823e-09).transl(3.355018802693481e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(5.580385785480898e-09, 5.580385785480898e-09).transl(-8.288471197115466e-08, -3.589097642712833e-08, 0))
hIsland = hIsland.add(rect(2.741874608234829e-10, 2.741874608234829e-10).transl(2.850323860640179e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(1.4521599265002162e-09, 1.4521599265002162e-09).transl(1.0599338395790082e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(2.1251999632558816e-09, 2.1251999632558816e-09).transl(-8.265260868395097e-08, 3.596996874773938e-08, 0))
hIsland = hIsland.add(rect(8.772618384205558e-09, 8.772618384205558e-09).transl(-5.0908440678825614e-08, -4e-08, 0))
hIsland = hIsland.add(rect(1.013604814149659e-09, 1.013604814149659e-09).transl(-4.946710498243271e-08, 4e-08, 0))
hIsland = hIsland.add(rect(3.954213978314447e-09, 3.954213978314447e-09).transl(-4.817157001588027e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(9.46838176800372e-09, 9.46838176800372e-09).transl(9.504136203553012e-08, 3.029799730566774e-08, 0))
hIsland = hIsland.add(rect(3.274567249477114e-09, 3.274567249477114e-09).transl(-6.223457487095717e-08, -3.98641704425293e-08, 0))
hIsland = hIsland.sub(rect(8.098821095393869e-09, 8.098821095393869e-09).transl(6.085839896936796e-08, -3.993171430376901e-08, 0))
hIsland = hIsland.sub(rect(9.406883796873137e-09, 9.406883796873137e-09).transl(4.064441204643519e-08, -4e-08, 0))
hIsland = hIsland.add(rect(4.148167844448248e-09, 4.148167844448248e-09).transl(-1.1223799978020112e-07, 1.2248247688878331e-08, 0))
hIsland = hIsland.sub(rect(4.65737189803177e-10, 4.65737189803177e-10).transl(-7.30728947200973e-08, -3.850505446921907e-08, 0))
hIsland = hIsland.add(rect(5.471887766919907e-09, 5.471887766919907e-09).transl(-8.006270899602647e-08, 3.679187327221174e-08, 0))
hIsland = hIsland.sub(rect(3.806412427745907e-09, 3.806412427745907e-09).transl(-8.974797211508927e-08, 3.311712283578394e-08, 0))
hIsland = hIsland.add(rect(3.246544235876081e-10, 3.246544235876081e-10).transl(5.885971134060573e-08, 3.998881467849808e-08, 0))
hIsland = hIsland.sub(rect(6.428376163752223e-09, 6.428376163752223e-09).transl(-4.54987175823063e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(7.823050404668597e-10, 7.823050404668597e-10).transl(-5.193668375435966e-08, -4e-08, 0))
hIsland = hIsland.add(rect(6.3084711013120555e-09, 6.3084711013120555e-09).transl(-3.205149606109626e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(3.6986355146812976e-09, 3.6986355146812976e-09).transl(9.235112254492234e-08, -3.1815340603253775e-08, 0))
hIsland = hIsland.add(rect(2.2591729769663426e-09, 2.2591729769663426e-09).transl(-7.779793457055167e-08, -3.7424818806183275e-08, 0))
vIsland := hIsland.rotz(pi / 2)
vIslands := Universe().Inverse()
hIslands := Universe().Inverse()
hIslands = hIslands.add(hIsland.transl(-a/2, a, 0))
hIslands = hIslands.add(hIsland.transl(-a/2, -a, 0))
hIslands = hIslands.add(hIsland.transl(a/2, a, 0))
hIslands = hIslands.add(hIsland.transl(a/2, -a, 0))
hIslands = hIslands.add(hIsland.transl(-a/2, 0, 0))
hIslands = hIslands.add(hIsland.transl(a/2, 0, 0))
vIslands = vIslands.add(vIsland.transl(-a, a/2, 0))
vIslands = vIslands.add(vIsland.transl(a, a/2, 0))
vIslands = vIslands.add(vIsland.transl(-a, -a/2, 0))
vIslands = vIslands.add(vIsland.transl(a, -a/2, 0))
vIslands = vIslands.add(vIsland.transl(0, a/2, 0))
vIslands = vIslands.add(vIsland.transl(0, -a/2, 0))
DefRegion(1, hIslands)
DefRegion(2, vIslands)
TableAdd(m_full.Region(1))
TableAdd(m_full.Region(2))
setgeom(hIslands.add(vIslands))
save(m)
r2o2 := sqrt(2) / 2
m = RandomMagSeed(4)
B_ext = vector(Bmax*r2o2, Bmax*r2o2, 0)
relax()
minimize()
for B := Bmax; B >= -Bmax; B -= Bstep {
	B_ext = vector(B*r2o2, B*r2o2, 0)
	minimize()
	tablesave()
}
//********************************************************************//
//Please cite the following references, relevant for your simulation. //
//See bibtex file in output folder for justification.                 //
//********************************************************************//
//   * Vansteenkiste et al., AIP Adv. 4, 107133 (2014).
//   * Exl et al., J. Appl. Phys. 115, 17D118 (2014).
