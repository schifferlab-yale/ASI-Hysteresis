//mumax 3.10 [windows_amd64 go1.11.6(gc) CUDA-11.0]
//GPU info: NVIDIA GeForce RTX 3090(24575MB), CUDA Driver 11.7, cc=8.6, using cc=80 PTX
//(c) Arne Vansteenkiste, Dynamat LAB, Ghent University, Belgium
//This is free software without any warranty. See license.txt
//********************************************************************//
//  If you use mumax in any work or publication,                      //
//  we kindly ask you to cite the references in references.bib        //
//********************************************************************//
//output directory: r1;p0.5;a3.2e-07;l2.3000000000000002e-07;s0.out/
randSeed(0)
ThermSeed(0)
resolution := 2e-09
zResolution := 5e-09
a := 3.2e-07
gridSize := 320
gridDepth := 5
SetCellsize(resolution, resolution, zResolution)
SetGridsize(gridSize, gridSize, gridDepth)
SetPBC(16, 16, 0)
//resizing...
Msat = 700e3
Aex = 13e-12
alpha = 0.2
Bmax := 0.1
Bstep := Bmax / 500.0
TableAdd(B_ext)
TableAdd(m_full)
islandWidth := 8e-08
islandLength := 2.3000000000000002e-07
ellipseConstant := 5.7500000000000005e-08
hIsland := rect(islandLength-2*ellipseConstant, islandWidth)
hIsland = hIsland.add(ellipse(ellipseConstant*2, islandWidth).transl(islandLength/2-ellipseConstant, 0, 0))
hIsland = hIsland.add(ellipse(ellipseConstant*2, islandWidth).transl(-islandLength/2+ellipseConstant, 0, 0))
hIsland = hIsland.sub(rect(8.287020855784754e-09, 8.287020855784754e-09).transl(1.8459678583687857e-08, 4e-08, 0))
hIsland = hIsland.add(rect(1.1345641870306322e-09, 1.1345641870306322e-09).transl(5.290259107611874e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(4.0306332208234877e-10, 4.0306332208234877e-10).transl(5.925441761946548e-09, 4e-08, 0))
hIsland = hIsland.sub(rect(7.404329809786712e-09, 7.404329809786712e-09).transl(-6.598853917420171e-08, 3.956172569131838e-08, 0))
hIsland = hIsland.add(rect(4.139052109060189e-09, 4.139052109060189e-09).transl(4.9317702600512534e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(5.51308677687502e-09, 5.51308677687502e-09).transl(7.475603387285992e-08, 3.8156247757590864e-08, 0))
hIsland = hIsland.sub(rect(3.3525814314242243e-09, 3.3525814314242243e-09).transl(4.93559423544848e-09, -4e-08, 0))
hIsland = hIsland.sub(rect(2.1565938241348227e-09, 2.1565938241348227e-09).transl(-1.0495595653991932e-07, -2.2586554390428332e-08, 0))
hIsland = hIsland.add(rect(4.048878138626989e-09, 4.048878138626989e-09).transl(-1.0492214043792134e-07, -2.2620899409045715e-08, 0))
hIsland = hIsland.sub(rect(2.4264935089205166e-09, 2.4264935089205166e-09).transl(-1.821970082032113e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(7.434908672557307e-09, 7.434908672557307e-09).transl(-2.829728614419719e-10, -4e-08, 0))
hIsland = hIsland.sub(rect(1.4304310328201263e-09, 1.4304310328201263e-09).transl(-4.913706572810389e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(8.10254556084559e-09, 8.10254556084559e-09).transl(-6.546823259281384e-08, 3.961406113023782e-08, 0))
hIsland = hIsland.sub(rect(9.760120747167347e-09, 9.760120747167347e-09).transl(-4.691648515602292e-08, -4e-08, 0))
hIsland = hIsland.add(rect(3.9424575010943385e-09, 3.9424575010943385e-09).transl(4.8485737646594314e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(2.3100386779461522e-09, 2.3100386779461522e-09).transl(-2.0745297137162596e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(9.706068923444555e-09, 9.706068923444555e-09).transl(1.0682126240827036e-07, 2.0561942337821532e-08, 0))
hIsland = hIsland.sub(rect(2.1272061629803363e-09, 2.1272061629803363e-09).transl(-7.361509665542034e-08, -3.83969353521023e-08, 0))
hIsland = hIsland.add(rect(8.163005081761078e-09, 8.163005081761078e-09).transl(-2.9674210863357376e-08, 4e-08, 0))
hIsland = hIsland.add(rect(4.704938767865003e-09, 4.704938767865003e-09).transl(8.568774572825143e-09, 4e-08, 0))
hIsland = hIsland.add(rect(4.142331462306312e-09, 4.142331462306312e-09).transl(2.5358410116498698e-08, -4e-08, 0))
hIsland = hIsland.add(rect(6.8768177162829535e-09, 6.8768177162829535e-09).transl(1.0941766014229319e-07, -1.7192696427629146e-08, 0))
hIsland = hIsland.add(rect(4.184859682031278e-09, 4.184859682031278e-09).transl(2.738931949186809e-08, 4e-08, 0))
hIsland = hIsland.add(rect(6.83871785390312e-10, 6.83871785390312e-10).transl(-3.924236859195441e-08, 4e-08, 0))
hIsland = hIsland.add(rect(1.8955219804248303e-09, 1.8955219804248303e-09).transl(-4.182288108236971e-08, 4e-08, 0))
hIsland = hIsland.add(rect(5.162733835471567e-10, 5.162733835471567e-10).transl(-1.028500007716235e-07, 2.459135285661533e-08, 0))
hIsland = hIsland.add(rect(7.484001338892396e-09, 7.484001338892396e-09).transl(8.637639331857729e-08, 3.4590103173921795e-08, 0))
hIsland = hIsland.add(rect(7.931647957827783e-09, 7.931647957827783e-09).transl(1.1224284126117692e-07, 1.2237772003331182e-08, 0))
hIsland = hIsland.sub(rect(8.491850712427761e-09, 8.491850712427761e-09).transl(-9.528428439990493e-08, 3.0151509356367285e-08, 0))
hIsland = hIsland.add(rect(4.191831856640268e-09, 4.191831856640268e-09).transl(6.303502290430832e-08, -3.981424405013038e-08, 0))
hIsland = hIsland.add(rect(8.61785157178748e-09, 8.61785157178748e-09).transl(1.490971561923963e-08, -4e-08, 0))
hIsland = hIsland.add(rect(5.60398337552487e-09, 5.60398337552487e-09).transl(-1.1015382599448484e-07, -1.6072796334560348e-08, 0))
hIsland = hIsland.sub(rect(1.7126763395604916e-09, 1.7126763395604916e-09).transl(-2.8145763211597598e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(2.8938302295819497e-09, 2.8938302295819497e-09).transl(-8.852533652668842e-08, 3.367760229915111e-08, 0))
hIsland = hIsland.add(rect(8.492412926903204e-10, 8.492412926903204e-10).transl(7.091057953777473e-08, 3.889688824847082e-08, 0))
hIsland = hIsland.add(rect(6.9089100700934615e-09, 6.9089100700934615e-09).transl(4.717891658807229e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(5.1977438425166466e-09, 5.1977438425166466e-09).transl(1.0265579765255766e-07, -2.4763692560397157e-08, 0))
hIsland = hIsland.add(rect(2.1257039428381865e-09, 2.1257039428381865e-09).transl(-8.953036732974261e-08, -3.3219161846530004e-08, 0))
hIsland = hIsland.add(rect(4.444989641318851e-09, 4.444989641318851e-09).transl(-9.217610776725436e-08, 3.190775020753533e-08, 0))
hIsland = hIsland.add(rect(4.587979152107019e-09, 4.587979152107019e-09).transl(-1.5439625822673773e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(3.274537376923825e-10, 3.274537376923825e-10).transl(-4.3696126629668606e-08, -4e-08, 0))
hIsland = hIsland.add(rect(4.5384914978028025e-09, 4.5384914978028025e-09).transl(8.489854886889753e-08, 3.5167054662389165e-08, 0))
hIsland = hIsland.sub(rect(3.7651849408504315e-09, 3.7651849408504315e-09).transl(-5.337288056383352e-09, 4e-08, 0))
hIsland = hIsland.add(rect(6.968680958247398e-09, 6.968680958247398e-09).transl(-2.0513757615194494e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(1.0143913328899569e-09, 1.0143913328899569e-09).transl(-6.619839724366075e-08, 3.953965965404947e-08, 0))
hIsland = hIsland.add(rect(4.5009437110592264e-09, 4.5009437110592264e-09).transl(-2.306179948006273e-08, 4e-08, 0))
hIsland = hIsland.add(rect(7.685099482103252e-09, 7.685099482103252e-09).transl(-9.580621668023868e-08, 2.9831101222998907e-08, 0))
hIsland = hIsland.add(rect(4.773920812194765e-10, 4.773920812194765e-10).transl(1.0891677133366658e-07, 1.790633053611489e-08, 0))
hIsland = hIsland.sub(rect(4.391425489456924e-09, 4.391425489456924e-09).transl(1.0241295178156729e-07, 2.4976497502378114e-08, 0))
hIsland = hIsland.sub(rect(5.125611546238433e-09, 5.125611546238433e-09).transl(6.565656082135528e-08, 3.9595508041456375e-08, 0))
vIsland := hIsland.rotz(pi / 2)
vIslands := Universe().Inverse()
hIslands := Universe().Inverse()
hIslands = hIslands.add(hIsland.transl(-a/2, a, 0))
hIslands = hIslands.add(hIsland.transl(-a/2, -a, 0))
hIslands = hIslands.add(hIsland.transl(a/2, a, 0))
hIslands = hIslands.add(hIsland.transl(a/2, -a, 0))
hIslands = hIslands.add(hIsland.transl(-a/2, 0, 0))
hIslands = hIslands.add(hIsland.transl(a/2, 0, 0))
vIslands = vIslands.add(vIsland.transl(-a, a/2, 0))
vIslands = vIslands.add(vIsland.transl(a, a/2, 0))
vIslands = vIslands.add(vIsland.transl(-a, -a/2, 0))
vIslands = vIslands.add(vIsland.transl(a, -a/2, 0))
vIslands = vIslands.add(vIsland.transl(0, a/2, 0))
vIslands = vIslands.add(vIsland.transl(0, -a/2, 0))
DefRegion(1, hIslands)
DefRegion(2, vIslands)
TableAdd(m_full.Region(1))
TableAdd(m_full.Region(2))
setgeom(hIslands.add(vIslands))
save(m)
r2o2 := sqrt(2) / 2
m = RandomMagSeed(4)
B_ext = vector(Bmax*r2o2, Bmax*r2o2, 0)
relax()
minimize()
for B := Bmax; B >= -Bmax; B -= Bstep {
	B_ext = vector(B*r2o2, B*r2o2, 0)
	minimize()
	tablesave()
}
//********************************************************************//
//Please cite the following references, relevant for your simulation. //
//See bibtex file in output folder for justification.                 //
//********************************************************************//
//   * Vansteenkiste et al., AIP Adv. 4, 107133 (2014).
//   * Exl et al., J. Appl. Phys. 115, 17D118 (2014).
