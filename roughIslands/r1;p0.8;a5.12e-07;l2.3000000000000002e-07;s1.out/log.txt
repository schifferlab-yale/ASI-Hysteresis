//mumax 3.10 [windows_amd64 go1.11.6(gc) CUDA-11.0]
//GPU info: NVIDIA GeForce RTX 3090(24575MB), CUDA Driver 11.7, cc=8.6, using cc=80 PTX
//(c) Arne Vansteenkiste, Dynamat LAB, Ghent University, Belgium
//This is free software without any warranty. See license.txt
//********************************************************************//
//  If you use mumax in any work or publication,                      //
//  we kindly ask you to cite the references in references.bib        //
//********************************************************************//
//output directory: r1;p0.8;a5.12e-07;l2.3000000000000002e-07;s1.out/
randSeed(1)
ThermSeed(1)
resolution := 2e-09
zResolution := 5e-09
a := 5.12e-07
gridSize := 512
gridDepth := 5
SetCellsize(resolution, resolution, zResolution)
SetGridsize(gridSize, gridSize, gridDepth)
SetPBC(16, 16, 0)
//resizing...
Msat = 700e3
Aex = 13e-12
alpha = 0.2
Bmax := 0.1
Bstep := Bmax / 500.0
TableAdd(B_ext)
TableAdd(m_full)
islandWidth := 8e-08
islandLength := 2.3000000000000002e-07
ellipseConstant := 9.200000000000002e-08
hIsland := rect(islandLength-2*ellipseConstant, islandWidth)
hIsland = hIsland.add(ellipse(ellipseConstant*2, islandWidth).transl(islandLength/2-ellipseConstant, 0, 0))
hIsland = hIsland.add(ellipse(ellipseConstant*2, islandWidth).transl(-islandLength/2+ellipseConstant, 0, 0))
hIsland = hIsland.add(rect(2.322906475070762e-09, 2.322906475070762e-09).transl(-1.7386240237385782e-08, -4e-08, 0))
hIsland = hIsland.add(rect(6.439798971405392e-09, 6.439798971405392e-09).transl(-7.14891777449494e-08, -3.3993215273286695e-08, 0))
hIsland = hIsland.add(rect(1.010772014957041e-09, 1.010772014957041e-09).transl(9.478097645751694e-08, 2.501980848066864e-08, 0))
hIsland = hIsland.add(rect(2.442012595284726e-09, 2.442012595284726e-09).transl(-2.847059094540007e-08, -3.992922054165238e-08, 0))
hIsland = hIsland.sub(rect(6.3715396338864915e-09, 6.3715396338864915e-09).transl(-7.987990872066236e-08, -3.143894970253776e-08, 0))
hIsland = hIsland.sub(rect(4.259144990381688e-09, 4.259144990381688e-09).transl(8.163185645296324e-08, 3.082453975659461e-08, 0))
hIsland = hIsland.add(rect(6.854640301700198e-09, 6.854640301700198e-09).transl(-2.7897832053264173e-08, -3.9943275566515726e-08, 0))
hIsland = hIsland.add(rect(6.7478242711471524e-09, 6.7478242711471524e-09).transl(-9.837516858047856e-09, -4e-08, 0))
hIsland = hIsland.sub(rect(6.735245647965246e-09, 6.735245647965246e-09).transl(1.237077993177126e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(6.954365407494891e-09, 6.954365407494891e-09).transl(1.1040650746580282e-07, -1.2481384646347788e-08, 0))
hIsland = hIsland.add(rect(7.342639954862871e-09, 7.342639954862871e-09).transl(-3.311659806298415e-08, 3.975742715416954e-08, 0))
hIsland = hIsland.sub(rect(2.5553948086486002e-09, 2.5553948086486002e-09).transl(3.313373223224762e-08, 3.9756602264756184e-08, 0))
hIsland = hIsland.sub(rect(3.6563888945267122e-09, 3.6563888945267122e-09).transl(-8.167833993597757e-08, -3.08078146076512e-08, 0))
hIsland = hIsland.add(rect(3.356222221753552e-09, 3.356222221753552e-09).transl(1.1484447722018916e-07, 2.3248474613114417e-09, 0))
hIsland = hIsland.add(rect(6.970805695081782e-09, 6.970805695081782e-09).transl(-1.0474526382590338e-07, -1.8352316790403384e-08, 0))
hIsland = hIsland.sub(rect(1.8542120072251922e-09, 1.8542120072251922e-09).transl(6.73671212890819e-08, 3.504131654924949e-08, 0))
hIsland = hIsland.sub(rect(9.096260502779694e-09, 9.096260502779694e-09).transl(-1.883380367730009e-08, 4e-08, 0))
hIsland = hIsland.add(rect(3.95605966952426e-09, 3.95605966952426e-09).transl(6.5939039416297e-08, -3.53760219488225e-08, 0))
hIsland = hIsland.add(rect(1.8452556770767237e-09, 1.8452556770767237e-09).transl(-3.940544697178124e-09, -4e-08, 0))
hIsland = hIsland.add(rect(6.29663558586805e-10, 6.29663558586805e-10).transl(-7.663414759228975e-08, -3.249946404109035e-08, 0))
hIsland = hIsland.sub(rect(9.144741409729952e-09, 9.144741409729952e-09).transl(-5.224817773765772e-08, 3.79247690758531e-08, 0))
hIsland = hIsland.add(rect(9.409123273457501e-09, 9.409123273457501e-09).transl(1.0654031939455595e-07, -1.6754736008814425e-08, 0))
hIsland = hIsland.sub(rect(1.569638073427745e-09, 1.569638073427745e-09).transl(3.140171638906177e-08, 3.9832852951273324e-08, 0))
hIsland = hIsland.add(rect(2.328669735666609e-09, 2.328669735666609e-09).transl(-1.129556685080598e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(5.716929023031827e-09, 5.716929023031827e-09).transl(1.5217214149310592e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(9.332988328528585e-09, 9.332988328528585e-09).transl(-3.691577191842005e-08, 3.9539770344872245e-08, 0))
hIsland = hIsland.sub(rect(4.1626011340157864e-10, 4.1626011340157864e-10).transl(-3.621718462507686e-08, 3.9585054822853105e-08, 0))
hIsland = hIsland.add(rect(4.368450842971302e-09, 4.368450842971302e-09).transl(2.1391106663816293e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(3.145802213959331e-09, 3.145802213959331e-09).transl(8.539931297869628e-08, -2.9393123624511307e-08, 0))
hIsland = hIsland.sub(rect(2.4629900692544572e-09, 2.4629900692544572e-09).transl(2.52288469415234e-08, -3.99882597168433e-08, 0))
hIsland = hIsland.sub(rect(6.687711799518537e-10, 6.687711799518537e-10).transl(1.1060897947900683e-07, 1.2210091542327415e-08, 0))
hIsland = hIsland.add(rect(4.033462067687922e-09, 4.033462067687922e-09).transl(-7.551824585242536e-08, 3.284216091504628e-08, 0))
hIsland = hIsland.sub(rect(9.077546388033868e-09, 9.077546388033868e-09).transl(-1.0746900437007275e-07, 1.5850120909348015e-08, 0))
hIsland = hIsland.sub(rect(1.795613544585296e-09, 1.795613544585296e-09).transl(2.5918482276143755e-08, -3.997986842455314e-08, 0))
hIsland = hIsland.sub(rect(6.1098159521980975e-09, 6.1098159521980975e-09).transl(1.126954620223074e-07, 8.896847348467339e-09, 0))
hIsland = hIsland.add(rect(5.725591142722838e-09, 5.725591142722838e-09).transl(-3.3698369896821845e-08, 3.972862786138893e-08, 0))
hIsland = hIsland.sub(rect(6.888178951558666e-09, 6.888178951558666e-09).transl(3.126462754247889e-10, 4e-08, 0))
hIsland = hIsland.sub(rect(1.603922831999426e-09, 1.603922831999426e-09).transl(-6.149147075615682e-08, 3.633078100191954e-08, 0))
hIsland = hIsland.add(rect(9.270671616800596e-09, 9.270671616800596e-09).transl(-1.0526345643367972e-07, 1.7909263718911286e-08, 0))
hIsland = hIsland.sub(rect(5.821797545785635e-09, 5.821797545785635e-09).transl(-9.63192468617912e-08, 2.4161898952415048e-08, 0))
hIsland = hIsland.add(rect(7.00800857302325e-10, 7.00800857302325e-10).transl(6.222217762036226e-09, -4e-08, 0))
hIsland = hIsland.add(rect(5.96210081069569e-09, 5.96210081069569e-09).transl(6.112050083129454e-08, 3.640464514797469e-08, 0))
hIsland = hIsland.sub(rect(7.099933669264983e-09, 7.099933669264983e-09).transl(4.681834223700263e-08, 3.863621858070084e-08, 0))
hIsland = hIsland.sub(rect(7.108912743421846e-09, 7.108912743421846e-09).transl(9.144340275746059e-08, 2.6729410106594384e-08, 0))
hIsland = hIsland.sub(rect(1.5867236054522816e-09, 1.5867236054522816e-09).transl(-6.149324978468004e-08, 3.6330424690963253e-08, 0))
hIsland = hIsland.add(rect(5.352817584910433e-09, 5.352817584910433e-09).transl(-6.62069130871078e-08, -3.531431285119133e-08, 0))
hIsland = hIsland.add(rect(7.457333516251426e-09, 7.457333516251426e-09).transl(5.962807553833525e-08, -3.6693138391020876e-08, 0))
hIsland = hIsland.add(rect(3.61312732832201e-09, 3.61312732832201e-09).transl(8.464323799155964e-08, -2.969317326821895e-08, 0))
hIsland = hIsland.sub(rect(8.593926300380775e-09, 8.593926300380775e-09).transl(-1.0446723374580469e-07, -1.8584552734501808e-08, 0))
hIsland = hIsland.sub(rect(7.373447089370078e-09, 7.373447089370078e-09).transl(-4.416590209100033e-09, -4e-08, 0))
vIsland := hIsland.rotz(pi / 2)
vIslands := Universe().Inverse()
hIslands := Universe().Inverse()
hIslands = hIslands.add(hIsland.transl(-a/2, a, 0))
hIslands = hIslands.add(hIsland.transl(-a/2, -a, 0))
hIslands = hIslands.add(hIsland.transl(a/2, a, 0))
hIslands = hIslands.add(hIsland.transl(a/2, -a, 0))
hIslands = hIslands.add(hIsland.transl(-a/2, 0, 0))
hIslands = hIslands.add(hIsland.transl(a/2, 0, 0))
vIslands = vIslands.add(vIsland.transl(-a, a/2, 0))
vIslands = vIslands.add(vIsland.transl(a, a/2, 0))
vIslands = vIslands.add(vIsland.transl(-a, -a/2, 0))
vIslands = vIslands.add(vIsland.transl(a, -a/2, 0))
vIslands = vIslands.add(vIsland.transl(0, a/2, 0))
vIslands = vIslands.add(vIsland.transl(0, -a/2, 0))
DefRegion(1, hIslands)
DefRegion(2, vIslands)
TableAdd(m_full.Region(1))
TableAdd(m_full.Region(2))
setgeom(hIslands.add(vIslands))
save(m)
r2o2 := sqrt(2) / 2
m = RandomMagSeed(4)
B_ext = vector(Bmax*r2o2, Bmax*r2o2, 0)
relax()
minimize()
for B := Bmax; B >= -Bmax; B -= Bstep {
	B_ext = vector(B*r2o2, B*r2o2, 0)
	minimize()
	tablesave()
}
//********************************************************************//
//Please cite the following references, relevant for your simulation. //
//See bibtex file in output folder for justification.                 //
//********************************************************************//
//   * Vansteenkiste et al., AIP Adv. 4, 107133 (2014).
//   * Exl et al., J. Appl. Phys. 115, 17D118 (2014).
