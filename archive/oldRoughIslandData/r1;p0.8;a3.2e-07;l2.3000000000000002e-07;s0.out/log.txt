//mumax 3.10 [windows_amd64 go1.11.6(gc) CUDA-11.0]
//GPU info: NVIDIA GeForce RTX 3090(24575MB), CUDA Driver 11.7, cc=8.6, using cc=80 PTX
//(c) Arne Vansteenkiste, Dynamat LAB, Ghent University, Belgium
//This is free software without any warranty. See license.txt
//********************************************************************//
//  If you use mumax in any work or publication,                      //
//  we kindly ask you to cite the references in references.bib        //
//********************************************************************//
//output directory: r1;p0.8;a3.2e-07;l2.3000000000000002e-07;s0.out/
randSeed(0)
ThermSeed(0)
resolution := 2e-09
zResolution := 5e-09
a := 3.2e-07
gridSize := 320
gridDepth := 5
SetCellsize(resolution, resolution, zResolution)
SetGridsize(gridSize, gridSize, gridDepth)
SetPBC(16, 16, 0)
//resizing...
Msat = 700e3
Aex = 13e-12
alpha = 0.2
Bmax := 0.1
Bstep := Bmax / 500.0
TableAdd(B_ext)
TableAdd(m_full)
islandWidth := 8e-08
islandLength := 2.3000000000000002e-07
ellipseConstant := 9.200000000000002e-08
hIsland := rect(islandLength-2*ellipseConstant, islandWidth)
hIsland = hIsland.add(ellipse(ellipseConstant*2, islandWidth).transl(islandLength/2-ellipseConstant, 0, 0))
hIsland = hIsland.add(ellipse(ellipseConstant*2, islandWidth).transl(-islandLength/2+ellipseConstant, 0, 0))
hIsland = hIsland.add(rect(2.5591562264611e-09, 2.5591562264611e-09).transl(-7.568154908501003e-08, -3.2792682070153895e-08, 0))
hIsland = hIsland.sub(rect(8.357250946409091e-09, 8.357250946409091e-09).transl(8.086843795161354e-08, -3.109605792289584e-08, 0))
hIsland = hIsland.sub(rect(1.2295708396563765e-09, 1.2295708396563765e-09).transl(-7.217802400378102e-08, 3.380563245170879e-08, 0))
hIsland = hIsland.add(rect(7.2551070374900964e-09, 7.2551070374900964e-09).transl(-1.0760551441987249e-07, 1.5711884474884818e-08, 0))
hIsland = hIsland.add(rect(5.706111467649274e-09, 5.706111467649274e-09).transl(-5.079318173924717e-08, 3.81310521213453e-08, 0))
hIsland = hIsland.sub(rect(9.367171371783665e-09, 9.367171371783665e-09).transl(-7.448205054876856e-08, 3.3150850925260075e-08, 0))
hIsland = hIsland.add(rect(9.06047425595841e-09, 9.06047425595841e-09).transl(-7.340222783394763e-08, 3.346305535371553e-08, 0))
hIsland = hIsland.add(rect(7.313859659342735e-09, 7.313859659342735e-09).transl(-8.83238031020958e-09, 4e-08, 0))
hIsland = hIsland.sub(rect(9.385337618138436e-09, 9.385337618138436e-09).transl(8.505883401805983e-08, -2.9529073560060808e-08, 0))
hIsland = hIsland.sub(rect(4.2399250024311445e-09, 4.2399250024311445e-09).transl(-2.3889919124578272e-08, 3.999812860450257e-08, 0))
hIsland = hIsland.add(rect(5.456375827005209e-09, 5.456375827005209e-09).transl(-1.327481423066501e-08, -4e-08, 0))
hIsland = hIsland.add(rect(4.420075845394509e-09, 4.420075845394509e-09).transl(9.113902133374934e-08, 2.687601502608232e-08, 0))
hIsland = hIsland.add(rect(2.077178021131235e-09, 2.077178021131235e-09).transl(-6.051151346031047e-08, 3.6524032945349776e-08, 0))
hIsland = hIsland.sub(rect(9.69459953354481e-09, 9.69459953354481e-09).transl(-4.694838753580616e-08, -3.862101922013517e-08, 0))
hIsland = hIsland.sub(rect(6.347202813278201e-09, 6.347202813278201e-09).transl(-2.1379184571417864e-08, -4e-08, 0))
hIsland = hIsland.add(rect(5.800333904649879e-10, 5.800333904649879e-10).transl(1.8579699911150152e-09, -4e-08, 0))
hIsland = hIsland.sub(rect(3.8989850769495014e-09, 3.8989850769495014e-09).transl(-8.726131078575693e-08, 2.8624694667711796e-08, 0))
hIsland = hIsland.sub(rect(4.765905898058846e-09, 4.765905898058846e-09).transl(1.913522040028888e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(2.774934151509275e-09, 2.774934151509275e-09).transl(1.27277598476015e-08, 4e-08, 0))
hIsland = hIsland.add(rect(7.852641200228786e-09, 7.852641200228786e-09).transl(-4.4450493304519e-08, -3.889755906880178e-08, 0))
hIsland = hIsland.sub(rect(5.381396068353295e-09, 5.381396068353295e-09).transl(-7.2684894271968e-08, 3.366523530701409e-08, 0))
hIsland = hIsland.sub(rect(9.068540099270293e-09, 9.068540099270293e-09).transl(-7.385895674718086e-08, 3.333216717156555e-08, 0))
hIsland = hIsland.add(rect(9.674642698911082e-09, 9.674642698911082e-09).transl(-2.106064057625381e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(5.19354768289433e-09, 5.19354768289433e-09).transl(-7.341977105222216e-08, -3.345805908562572e-08, 0))
hIsland = hIsland.add(rect(9.142832356818992e-09, 9.142832356818992e-09).transl(-1.0706077420416281e-07, 1.6255208501887654e-08, 0))
hIsland = hIsland.add(rect(7.566958720221768e-09, 7.566958720221768e-09).transl(9.789278403689613e-08, 2.323167977200296e-08, 0))
hIsland = hIsland.sub(rect(5.367276459017088e-09, 5.367276459017088e-09).transl(9.027081150096775e-08, -2.72863341298531e-08, 0))
hIsland = hIsland.sub(rect(2.637778580910334e-09, 2.637778580910334e-09).transl(-6.901214072966311e-08, 3.463796802660395e-08, 0))
hIsland = hIsland.sub(rect(8.332486023341997e-09, 8.332486023341997e-09).transl(-6.993636477417404e-08, 3.440275646676396e-08, 0))
hIsland = hIsland.sub(rect(4.72160856697217e-09, 4.72160856697217e-09).transl(1.2178921790025252e-08, -4e-08, 0))
hIsland = hIsland.add(rect(7.317662133743108e-09, 7.317662133743108e-09).transl(5.601246576567351e-08, 3.733609955113035e-08, 0))
hIsland = hIsland.sub(rect(6.840282487384592e-09, 6.840282487384592e-09).transl(5.8465210801474045e-08, 3.6908456781679526e-08, 0))
hIsland = hIsland.sub(rect(1.286552995808189e-09, 1.286552995808189e-09).transl(6.65932707832839e-08, 3.522444036381967e-08, 0))
hIsland = hIsland.add(rect(3.7990189648563154e-10, 3.7990189648563154e-10).transl(4.622613624834776e-08, -3.8704314113504474e-08, 0))
hIsland = hIsland.sub(rect(9.804519929866904e-09, 9.804519929866904e-09).transl(-1.1067278159104974e-07, 1.2123212499255167e-08, 0))
hIsland = hIsland.sub(rect(8.002952528452967e-10, 8.002952528452967e-10).transl(4.267769288485853e-08, 3.907432789831388e-08, 0))
hIsland = hIsland.sub(rect(7.436762895177504e-09, 7.436762895177504e-09).transl(1.6992656246295408e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(7.296312056083185e-09, 7.296312056083185e-09).transl(-1.2958658025973513e-08, -4e-08, 0))
hIsland = hIsland.add(rect(8.509571995535536e-09, 8.509571995535536e-09).transl(-1.0261063439856315e-07, -2.004789581922526e-08, 0))
hIsland = hIsland.sub(rect(4.474407300049607e-09, 4.474407300049607e-09).transl(-2.738837634727276e-09, 4e-08, 0))
hIsland = hIsland.sub(rect(1.1676844631503202e-10, 1.1676844631503202e-10).transl(4.625544936588642e-08, -3.870098662495483e-08, 0))
hIsland = hIsland.add(rect(1.7310684212739958e-10, 1.7310684212739958e-10).transl(-4.604116981312401e-08, 3.8725207310199355e-08, 0))
hIsland = hIsland.sub(rect(7.092046207499896e-09, 7.092046207499896e-09).transl(8.965215383481098e-08, 2.757183567915759e-08, 0))
hIsland = hIsland.add(rect(2.2216487569341472e-09, 2.2216487569341472e-09).transl(-3.4560055078390366e-08, -3.9682971274644126e-08, 0))
hIsland = hIsland.sub(rect(2.7973586237160055e-09, 2.7973586237160055e-09).transl(1.85773820120772e-08, 4e-08, 0))
hIsland = hIsland.add(rect(1.847052427285788e-09, 1.847052427285788e-09).transl(-6.05031628333996e-08, -3.652565397623416e-08, 0))
hIsland = hIsland.sub(rect(3.908152398311194e-09, 3.908152398311194e-09).transl(1.0878130492979264e-07, -1.4456555897585894e-08, 0))
hIsland = hIsland.sub(rect(8.248316830260013e-09, 8.248316830260013e-09).transl(-1.0010619478431329e-07, 2.1820000562618093e-08, 0))
hIsland = hIsland.add(rect(8.334078721208369e-09, 8.334078721208369e-09).transl(6.687122087649805e-08, -3.5159146625830105e-08, 0))
hIsland = hIsland.add(rect(1.7341568186535285e-09, 1.7341568186535285e-09).transl(2.199023115760999e-08, -4e-08, 0))
vIsland := hIsland.rotz(pi / 2)
vIslands := Universe().Inverse()
hIslands := Universe().Inverse()
hIslands = hIslands.add(hIsland.transl(-a/2, a, 0))
hIslands = hIslands.add(hIsland.transl(-a/2, -a, 0))
hIslands = hIslands.add(hIsland.transl(a/2, a, 0))
hIslands = hIslands.add(hIsland.transl(a/2, -a, 0))
hIslands = hIslands.add(hIsland.transl(-a/2, 0, 0))
hIslands = hIslands.add(hIsland.transl(a/2, 0, 0))
vIslands = vIslands.add(vIsland.transl(-a, a/2, 0))
vIslands = vIslands.add(vIsland.transl(a, a/2, 0))
vIslands = vIslands.add(vIsland.transl(-a, -a/2, 0))
vIslands = vIslands.add(vIsland.transl(a, -a/2, 0))
vIslands = vIslands.add(vIsland.transl(0, a/2, 0))
vIslands = vIslands.add(vIsland.transl(0, -a/2, 0))
DefRegion(1, hIslands)
DefRegion(2, vIslands)
TableAdd(m_full.Region(1))
TableAdd(m_full.Region(2))
setgeom(hIslands.add(vIslands))
save(m)
r2o2 := sqrt(2) / 2
m = RandomMagSeed(4)
B_ext = vector(Bmax*r2o2, Bmax*r2o2, 0)
relax()
minimize()
for B := Bmax; B >= -Bmax; B -= Bstep {
	B_ext = vector(B*r2o2, B*r2o2, 0)
	minimize()
	tablesave()
}
//********************************************************************//
//Please cite the following references, relevant for your simulation. //
//See bibtex file in output folder for justification.                 //
//********************************************************************//
//   * Vansteenkiste et al., AIP Adv. 4, 107133 (2014).
//   * Exl et al., J. Appl. Phys. 115, 17D118 (2014).
