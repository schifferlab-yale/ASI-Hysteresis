//mumax 3.10 [windows_amd64 go1.11.6(gc) CUDA-11.0]
//GPU info: NVIDIA GeForce RTX 3090(24575MB), CUDA Driver 11.7, cc=8.6, using cc=80 PTX
//(c) Arne Vansteenkiste, Dynamat LAB, Ghent University, Belgium
//This is free software without any warranty. See license.txt
//********************************************************************//
//  If you use mumax in any work or publication,                      //
//  we kindly ask you to cite the references in references.bib        //
//********************************************************************//
//output directory: r1;p0.8;a5.12e-07;l3.0000000000000004e-07;s2.out/
randSeed(2)
ThermSeed(2)
resolution := 2e-09
zResolution := 5e-09
a := 5.12e-07
gridSize := 512
gridDepth := 5
SetCellsize(resolution, resolution, zResolution)
SetGridsize(gridSize, gridSize, gridDepth)
SetPBC(16, 16, 0)
//resizing...
Msat = 700e3
Aex = 13e-12
alpha = 0.2
Bmax := 0.1
Bstep := Bmax / 500.0
TableAdd(B_ext)
TableAdd(m_full)
islandWidth := 8e-08
islandLength := 3.0000000000000004e-07
ellipseConstant := 1.2000000000000002e-07
hIsland := rect(islandLength-2*ellipseConstant, islandWidth)
hIsland = hIsland.add(ellipse(ellipseConstant*2, islandWidth).transl(islandLength/2-ellipseConstant, 0, 0))
hIsland = hIsland.add(ellipse(ellipseConstant*2, islandWidth).transl(-islandLength/2+ellipseConstant, 0, 0))
hIsland = hIsland.add(rect(6.836367634611151e-10, 6.836367634611151e-10).transl(1.3539100087775014e-07, 1.9127458255915388e-08, 0))
hIsland = hIsland.sub(rect(8.552386276122219e-09, 8.552386276122219e-09).transl(-6.45121691410695e-08, 3.831000765854242e-08, 0))
hIsland = hIsland.add(rect(4.877253487980066e-09, 4.877253487980066e-09).transl(8.917493887027033e-08, -3.47983502318074e-08, 0))
hIsland = hIsland.sub(rect(2.3746618889398565e-09, 2.3746618889398565e-09).transl(-1.0144082953601296e-07, 3.2138948118039544e-08, 0))
hIsland = hIsland.add(rect(8.594825145032481e-10, 8.594825145032481e-10).transl(6.259330533745528e-08, 3.849628618044345e-08, 0))
hIsland = hIsland.add(rect(9.67666454698685e-09, 9.67666454698685e-09).transl(-5.168617118678621e-08, -3.934139744913521e-08, 0))
hIsland = hIsland.add(rect(3.172270010682784e-09, 3.172270010682784e-09).transl(2.0346285540073654e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(2.524910593998064e-10, 2.524910593998064e-10).transl(1.3795407321684003e-07, 1.746716944535009e-08, 0))
hIsland = hIsland.add(rect(9.381375033387271e-09, 9.381375033387271e-09).transl(7.406010067408618e-08, -3.720619352352418e-08, 0))
hIsland = hIsland.add(rect(4.46156925887156e-09, 4.46156925887156e-09).transl(1.89988574302886e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(1.6676440682747252e-09, 1.6676440682747252e-09).transl(5.1282256621638105e-09, -4e-08, 0))
hIsland = hIsland.sub(rect(9.260578478287385e-09, 9.260578478287385e-09).transl(-9.31826238298384e-08, -3.400646351304597e-08, 0))
hIsland = hIsland.add(rect(9.274543968582592e-09, 9.274543968582592e-09).transl(1.3781648419007197e-07, 1.756133928356378e-08, 0))
hIsland = hIsland.sub(rect(5.1017641572531084e-09, 5.1017641572531084e-09).transl(-3.826717890092223e-08, -3.990496175361899e-08, 0))
hIsland = hIsland.sub(rect(3.2872361239678874e-09, 3.2872361239678874e-09).transl(-5.1521234352674116e-08, -3.9351459766707625e-08, 0))
hIsland = hIsland.add(rect(1.4739208657545745e-09, 1.4739208657545745e-09).transl(-2.2506813440403764e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(4.993841750173711e-10, 4.993841750173711e-10).transl(-4.280140615991385e-08, 3.9771743180203984e-08, 0))
hIsland = hIsland.sub(rect(7.252073617919598e-09, 7.252073617919598e-09).transl(1.0144551882776555e-07, 3.213778986978725e-08, 0))
hIsland = hIsland.sub(rect(7.198136827485914e-09, 7.198136827485914e-09).transl(-1.1611034145813937e-08, 4e-08, 0))
hIsland = hIsland.add(rect(8.23806792911631e-09, 8.23806792911631e-09).transl(1.0185794229175708e-07, -3.2035459744883586e-08, 0))
hIsland = hIsland.add(rect(3.855592024503043e-09, 3.855592024503043e-09).transl(-4.642095225000104e-09, 4e-08, 0))
hIsland = hIsland.sub(rect(5.880641414984431e-09, 5.880641414984431e-09).transl(-8.038556465306812e-08, -3.630319066876062e-08, 0))
hIsland = hIsland.sub(rect(4.1890596230377786e-09, 4.1890596230377786e-09).transl(-4.0709096993659666e-08, -3.984039720013454e-08, 0))
hIsland = hIsland.add(rect(2.588089952156869e-09, 2.588089952156869e-09).transl(-8.699014929118298e-08, 3.520120402576006e-08, 0))
hIsland = hIsland.add(rect(4.682784728523149e-10, 4.682784728523149e-10).transl(-1.0547957680314732e-07, 3.109632612386834e-08, 0))
hIsland = hIsland.add(rect(9.376209289889801e-09, 9.376209289889801e-09).transl(-6.689043172442417e-08, 3.8062953769870366e-08, 0))
hIsland = hIsland.sub(rect(7.598510385135293e-10, 7.598510385135293e-10).transl(-2.552039751128841e-08, 4e-08, 0))
hIsland = hIsland.add(rect(8.94863124755186e-09, 8.94863124755186e-09).transl(1.2178795292921856e-07, -2.5765980364002715e-08, 0))
hIsland = hIsland.sub(rect(3.994373162151977e-09, 3.994373162151977e-09).transl(-4.6429471329706496e-08, -3.962332712462635e-08, 0))
hIsland = hIsland.add(rect(9.386532537451193e-09, 9.386532537451193e-09).transl(-2.6039260582117645e-09, -4e-08, 0))
hIsland = hIsland.sub(rect(5.675234959257326e-09, 5.675234959257326e-09).transl(-1.0257618130381345e-07, 3.1855050022381766e-08, 0))
hIsland = hIsland.sub(rect(5.983981723577778e-09, 5.983981723577778e-09).transl(9.218628122862318e-08, -3.420991803386619e-08, 0))
hIsland = hIsland.sub(rect(9.76236103199156e-09, 9.76236103199156e-09).transl(-8.34703727179771e-09, -4e-08, 0))
hIsland = hIsland.sub(rect(6.066140042672341e-10, 6.066140042672341e-10).transl(6.874823617399103e-08, -3.7857296659670385e-08, 0))
hIsland = hIsland.sub(rect(5.881447125410932e-09, 5.881447125410932e-09).transl(-6.82221009549249e-08, 3.7916679118813386e-08, 0))
hIsland = hIsland.add(rect(3.88501804557883e-09, 3.88501804557883e-09).transl(5.200611242276801e-08, 3.932165224294582e-08, 0))
hIsland = hIsland.sub(rect(7.893024273062024e-09, 7.893024273062024e-09).transl(-3.5258729157680624e-08, 3.996157288591429e-08, 0))
hIsland = hIsland.sub(rect(1.5235791717550496e-09, 1.5235791717550496e-09).transl(-4.782719967200619e-08, -3.955613585196841e-08, 0))
hIsland = hIsland.sub(rect(2.467973957861609e-09, 2.467973957861609e-09).transl(1.1869189205216765e-07, -2.6943868162877356e-08, 0))
hIsland = hIsland.sub(rect(8.476819201665171e-09, 8.476819201665171e-09).transl(-9.838670759107239e-08, -3.286886102352323e-08, 0))
hIsland = hIsland.sub(rect(1.2493018927427725e-09, 1.2493018927427725e-09).transl(8.43345019830005e-08, 3.566473810091125e-08, 0))
hIsland = hIsland.add(rect(8.205328562396796e-09, 8.205328562396796e-09).transl(1.2118929110263078e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(3.54388841456031e-09, 3.54388841456031e-09).transl(6.360650133741622e-08, -3.83993678591751e-08, 0))
hIsland = hIsland.sub(rect(8.581603479464811e-09, 8.581603479464811e-09).transl(3.8132115601036375e-08, -3.9908045270556915e-08, 0))
hIsland = hIsland.add(rect(9.679458015386865e-09, 9.679458015386865e-09).transl(-4.9237017095585076e-08, 3.948267858365822e-08, 0))
hIsland = hIsland.add(rect(4.211141039730173e-09, 4.211141039730173e-09).transl(1.1493965410135839e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(2.450684617655562e-09, 2.450684617655562e-09).transl(6.981310118889814e-08, 3.773433004237588e-08, 0))
hIsland = hIsland.sub(rect(7.583429808721929e-09, 7.583429808721929e-09).transl(-1.0498943036432297e-07, 3.122781049291794e-08, 0))
hIsland = hIsland.add(rect(3.044527230733296e-10, 3.044527230733296e-10).transl(-1.215019605177561e-07, 2.587875838814316e-08, 0))
hIsland = hIsland.sub(rect(5.253298357001236e-09, 5.253298357001236e-09).transl(1.3584544081175129e-08, 4e-08, 0))
vIsland := hIsland.rotz(pi / 2)
vIslands := Universe().Inverse()
hIslands := Universe().Inverse()
hIslands = hIslands.add(hIsland.transl(-a/2, a, 0))
hIslands = hIslands.add(hIsland.transl(-a/2, -a, 0))
hIslands = hIslands.add(hIsland.transl(a/2, a, 0))
hIslands = hIslands.add(hIsland.transl(a/2, -a, 0))
hIslands = hIslands.add(hIsland.transl(-a/2, 0, 0))
hIslands = hIslands.add(hIsland.transl(a/2, 0, 0))
vIslands = vIslands.add(vIsland.transl(-a, a/2, 0))
vIslands = vIslands.add(vIsland.transl(a, a/2, 0))
vIslands = vIslands.add(vIsland.transl(-a, -a/2, 0))
vIslands = vIslands.add(vIsland.transl(a, -a/2, 0))
vIslands = vIslands.add(vIsland.transl(0, a/2, 0))
vIslands = vIslands.add(vIsland.transl(0, -a/2, 0))
DefRegion(1, hIslands)
DefRegion(2, vIslands)
TableAdd(m_full.Region(1))
TableAdd(m_full.Region(2))
setgeom(hIslands.add(vIslands))
save(m)
r2o2 := sqrt(2) / 2
m = RandomMagSeed(4)
B_ext = vector(Bmax*r2o2, Bmax*r2o2, 0)
relax()
minimize()
for B := Bmax; B >= -Bmax; B -= Bstep {
	B_ext = vector(B*r2o2, B*r2o2, 0)
	minimize()
	tablesave()
}
//********************************************************************//
//Please cite the following references, relevant for your simulation. //
//See bibtex file in output folder for justification.                 //
//********************************************************************//
//   * Vansteenkiste et al., AIP Adv. 4, 107133 (2014).
//   * Exl et al., J. Appl. Phys. 115, 17D118 (2014).
