//mumax 3.10 [windows_amd64 go1.11.6(gc) CUDA-11.0]
//GPU info: NVIDIA GeForce RTX 3090(24575MB), CUDA Driver 11.7, cc=8.6, using cc=80 PTX
//(c) Arne Vansteenkiste, Dynamat LAB, Ghent University, Belgium
//This is free software without any warranty. See license.txt
//********************************************************************//
//  If you use mumax in any work or publication,                      //
//  we kindly ask you to cite the references in references.bib        //
//********************************************************************//
//output directory: r1;p0.8;a5.12e-07;l1.8000000000000002e-07;s1.out/
randSeed(1)
ThermSeed(1)
resolution := 2e-09
zResolution := 5e-09
a := 5.12e-07
gridSize := 512
gridDepth := 5
SetCellsize(resolution, resolution, zResolution)
SetGridsize(gridSize, gridSize, gridDepth)
SetPBC(16, 16, 0)
//resizing...
Msat = 700e3
Aex = 13e-12
alpha = 0.2
Bmax := 0.1
Bstep := Bmax / 500.0
TableAdd(B_ext)
TableAdd(m_full)
islandWidth := 8e-08
islandLength := 1.8000000000000002e-07
ellipseConstant := 7.200000000000001e-08
hIsland := rect(islandLength-2*ellipseConstant, islandWidth)
hIsland = hIsland.add(ellipse(ellipseConstant*2, islandWidth).transl(islandLength/2-ellipseConstant, 0, 0))
hIsland = hIsland.add(ellipse(ellipseConstant*2, islandWidth).transl(-islandLength/2+ellipseConstant, 0, 0))
hIsland = hIsland.add(rect(1.851830111012065e-10, 1.851830111012065e-10).transl(-1.4744205155371831e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(8.159801538013007e-09, 8.159801538013007e-09).transl(-3.4300435277761095e-08, -3.896142366335144e-08, 0))
hIsland = hIsland.sub(rect(8.941935815026747e-10, 8.941935815026747e-10).transl(-5.503885075601052e-08, 3.430133142987804e-08, 0))
hIsland = hIsland.add(rect(8.14989282175442e-09, 8.14989282175442e-09).transl(4.040290207618329e-08, 3.8014414008328304e-08, 0))
hIsland = hIsland.sub(rect(7.107485204491263e-09, 7.107485204491263e-09).transl(1.1741153242771604e-08, 4e-08, 0))
hIsland = hIsland.add(rect(1.342744040200883e-10, 1.342744040200883e-10).transl(8.546260315883002e-09, 4e-08, 0))
hIsland = hIsland.sub(rect(3.949308793509126e-09, 3.949308793509126e-09).transl(6.289242801731197e-08, -3.1272744348844216e-08, 0))
hIsland = hIsland.sub(rect(2.272526512547891e-09, 2.272526512547891e-09).transl(-4.538190168540816e-08, 3.6994458460938436e-08, 0))
hIsland = hIsland.sub(rect(3.5762077724032626e-09, 3.5762077724032626e-09).transl(4.4087405194813e-08, 3.728207166113743e-08, 0))
hIsland = hIsland.add(rect(6.640445560763232e-09, 6.640445560763232e-09).transl(-4.508510691429328e-08, -3.7061830983869985e-08, 0))
hIsland = hIsland.add(rect(9.47958276329713e-09, 9.47958276329713e-09).transl(-7.53642558269092e-08, -2.41736398204363e-08, 0))
hIsland = hIsland.add(rect(4.959401967153463e-09, 4.959401967153463e-09).transl(-1.7399673084976812e-08, 4e-08, 0))
hIsland = hIsland.add(rect(7.687081507799626e-09, 7.687081507799626e-09).transl(2.7705159175292995e-08, 3.9634946410583465e-08, 0))
hIsland = hIsland.add(rect(7.613999600073013e-09, 7.613999600073013e-09).transl(5.5654841350141474e-08, -3.409370223014692e-08, 0))
hIsland = hIsland.add(rect(7.779274198309568e-09, 7.779274198309568e-09).transl(-2.108059377106268e-08, -3.99633703503414e-08, 0))
hIsland = hIsland.sub(rect(8.859365170070945e-09, 8.859365170070945e-09).transl(-4.473846136332741e-08, -3.713943814071476e-08, 0))
hIsland = hIsland.sub(rect(7.382081287608245e-09, 7.382081287608245e-09).transl(7.71705174472133e-08, 2.2790307292584734e-08, 0))
hIsland = hIsland.sub(rect(9.718147866494822e-09, 9.718147866494822e-09).transl(5.008638575008057e-08, -3.580840584076743e-08, 0))
hIsland = hIsland.add(rect(4.136723848796302e-09, 4.136723848796302e-09).transl(7.732311554968381e-08, 2.2667537847357347e-08, 0))
hIsland = hIsland.sub(rect(9.689577421746623e-09, 9.689577421746623e-09).transl(-8.44566485441955e-08, 1.5391133653700567e-08, 0))
hIsland = hIsland.sub(rect(7.400492156511115e-09, 7.400492156511115e-09).transl(-1.7635253366392691e-09, 4e-08, 0))
hIsland = hIsland.sub(rect(1.897028756371322e-09, 1.897028756371322e-09).transl(-2.4636551359901543e-08, 3.982971541778249e-08, 0))
hIsland = hIsland.sub(rect(6.564031885865428e-09, 6.564031885865428e-09).transl(4.497362313480987e-08, -3.708691682636305e-08, 0))
hIsland = hIsland.add(rect(5.54062024921843e-09, 5.54062024921843e-09).transl(2.384025331540627e-08, -3.986819116840775e-08, 0))
hIsland = hIsland.sub(rect(9.081773050005596e-09, 9.081773050005596e-09).transl(1.3997412440045619e-08, 4e-08, 0))
hIsland = hIsland.add(rect(4.0706310059702716e-09, 4.0706310059702716e-09).transl(1.6913155541537982e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(9.280945447111211e-10, 9.280945447111211e-10).transl(-5.878604817023931e-08, -3.296321497609358e-08, 0))
hIsland = hIsland.sub(rect(9.42256041610727e-09, 9.42256041610727e-09).transl(4.43658071261912e-08, 3.722157634010313e-08, 0))
hIsland = hIsland.add(rect(4.889671776883364e-09, 4.889671776883364e-09).transl(4.399058357567718e-08, 3.730293721843016e-08, 0))
hIsland = hIsland.sub(rect(1.7671689505549527e-09, 1.7671689505549527e-09).transl(5.1878764514604996e-08, -3.529518081224572e-08, 0))
hIsland = hIsland.add(rect(6.882100411530268e-09, 6.882100411530268e-09).transl(5.0692694119983505e-08, 3.56387384216846e-08, 0))
hIsland = hIsland.sub(rect(7.449828063822075e-09, 7.449828063822075e-09).transl(-5.719124192596915e-08, -3.355503382734653e-08, 0))
hIsland = hIsland.add(rect(3.2782527764860746e-09, 3.2782527764860746e-09).transl(-4.367936432765744e-08, 3.736940324224227e-08, 0))
hIsland = hIsland.add(rect(5.674349420106208e-09, 5.674349420106208e-09).transl(5.29477843424657e-08, -3.49720010122406e-08, 0))
hIsland = hIsland.sub(rect(6.53989847470157e-09, 6.53989847470157e-09).transl(-6.66704031217621e-09, -4e-08, 0))
hIsland = hIsland.sub(rect(4.666361235598644e-09, 4.666361235598644e-09).transl(-7.753041221619917e-08, -2.249917708625048e-08, 0))
hIsland = hIsland.sub(rect(4.298451328764419e-09, 4.298451328764419e-09).transl(-8.78367537966956e-08, 9.731389632469095e-09, 0))
hIsland = hIsland.add(rect(9.423606892194692e-09, 9.423606892194692e-09).transl(-2.303722444079788e-08, -3.9901987828871126e-08, 0))
hIsland = hIsland.sub(rect(9.431853068623996e-10, 9.431853068623996e-10).transl(3.5941443931507864e-08, -3.873821839872841e-08, 0))
hIsland = hIsland.add(rect(9.705556071727063e-10, 9.705556071727063e-10).transl(6.715823260488478e-08, -2.9225961775744822e-08, 0))
hIsland = hIsland.add(rect(2.34142108290859e-09, 2.34142108290859e-09).transl(8.703204108044297e-09, 4e-08, 0))
hIsland = hIsland.sub(rect(6.127617609510724e-09, 6.127617609510724e-09).transl(-3.262874393576333e-08, 3.916568103906356e-08, 0))
hIsland = hIsland.add(rect(7.001914800621374e-09, 7.001914800621374e-09).transl(-8.029057540798732e-08, 2.0060742752870992e-08, 0))
hIsland = hIsland.add(rect(4.236141305688248e-09, 4.236141305688248e-09).transl(-3.5014520934031784e-09, 4e-08, 0))
hIsland = hIsland.sub(rect(6.682597156240661e-09, 6.682597156240661e-09).transl(4.757836068722089e-08, 3.6468828982614294e-08, 0))
hIsland = hIsland.sub(rect(4.418654780613523e-09, 4.418654780613523e-09).transl(-7.735460212330703e-08, -2.2642083665402483e-08, 0))
hIsland = hIsland.add(rect(7.536790863255037e-09, 7.536790863255037e-09).transl(1.4160166507780645e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(7.690018619076172e-09, 7.690018619076172e-09).transl(7.338131263084505e-08, 2.556105140955502e-08, 0))
hIsland = hIsland.sub(rect(1.639661475618124e-09, 1.639661475618124e-09).transl(1.9919856709753e-08, -3.998577737197769e-08, 0))
hIsland = hIsland.add(rect(8.306066047571503e-10, 8.306066047571503e-10).transl(4.032053821993128e-08, -3.8029364765086255e-08, 0))
vIsland := hIsland.rotz(pi / 2)
vIslands := Universe().Inverse()
hIslands := Universe().Inverse()
hIslands = hIslands.add(hIsland.transl(-a/2, a, 0))
hIslands = hIslands.add(hIsland.transl(-a/2, -a, 0))
hIslands = hIslands.add(hIsland.transl(a/2, a, 0))
hIslands = hIslands.add(hIsland.transl(a/2, -a, 0))
hIslands = hIslands.add(hIsland.transl(-a/2, 0, 0))
hIslands = hIslands.add(hIsland.transl(a/2, 0, 0))
vIslands = vIslands.add(vIsland.transl(-a, a/2, 0))
vIslands = vIslands.add(vIsland.transl(a, a/2, 0))
vIslands = vIslands.add(vIsland.transl(-a, -a/2, 0))
vIslands = vIslands.add(vIsland.transl(a, -a/2, 0))
vIslands = vIslands.add(vIsland.transl(0, a/2, 0))
vIslands = vIslands.add(vIsland.transl(0, -a/2, 0))
DefRegion(1, hIslands)
DefRegion(2, vIslands)
TableAdd(m_full.Region(1))
TableAdd(m_full.Region(2))
setgeom(hIslands.add(vIslands))
save(m)
r2o2 := sqrt(2) / 2
m = RandomMagSeed(4)
B_ext = vector(Bmax*r2o2, Bmax*r2o2, 0)
relax()
minimize()
for B := Bmax; B >= -Bmax; B -= Bstep {
	B_ext = vector(B*r2o2, B*r2o2, 0)
	minimize()
	tablesave()
}
//********************************************************************//
//Please cite the following references, relevant for your simulation. //
//See bibtex file in output folder for justification.                 //
//********************************************************************//
//   * Vansteenkiste et al., AIP Adv. 4, 107133 (2014).
//   * Exl et al., J. Appl. Phys. 115, 17D118 (2014).
