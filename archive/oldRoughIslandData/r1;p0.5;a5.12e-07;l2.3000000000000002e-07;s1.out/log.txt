//mumax 3.10 [windows_amd64 go1.11.6(gc) CUDA-11.0]
//GPU info: NVIDIA GeForce RTX 3090(24575MB), CUDA Driver 11.7, cc=8.6, using cc=80 PTX
//(c) Arne Vansteenkiste, Dynamat LAB, Ghent University, Belgium
//This is free software without any warranty. See license.txt
//********************************************************************//
//  If you use mumax in any work or publication,                      //
//  we kindly ask you to cite the references in references.bib        //
//********************************************************************//
//output directory: r1;p0.5;a5.12e-07;l2.3000000000000002e-07;s1.out/
randSeed(1)
ThermSeed(1)
resolution := 2e-09
zResolution := 5e-09
a := 5.12e-07
gridSize := 512
gridDepth := 5
SetCellsize(resolution, resolution, zResolution)
SetGridsize(gridSize, gridSize, gridDepth)
SetPBC(16, 16, 0)
//resizing...
Msat = 700e3
Aex = 13e-12
alpha = 0.2
Bmax := 0.1
Bstep := Bmax / 500.0
TableAdd(B_ext)
TableAdd(m_full)
islandWidth := 8e-08
islandLength := 2.3000000000000002e-07
ellipseConstant := 5.7500000000000005e-08
hIsland := rect(islandLength-2*ellipseConstant, islandWidth)
hIsland = hIsland.add(ellipse(ellipseConstant*2, islandWidth).transl(islandLength/2-ellipseConstant, 0, 0))
hIsland = hIsland.add(ellipse(ellipseConstant*2, islandWidth).transl(-islandLength/2+ellipseConstant, 0, 0))
hIsland = hIsland.add(rect(4.130560954126822e-09, 4.130560954126822e-09).transl(6.845066566945332e-08, -3.926790412874308e-08, 0))
hIsland = hIsland.sub(rect(3.4769493764493787e-09, 3.4769493764493787e-09).transl(4.828123544225228e-08, 4e-08, 0))
hIsland = hIsland.add(rect(3.329870262560758e-09, 3.329870262560758e-09).transl(-4.409251869660432e-08, 4e-08, 0))
hIsland = hIsland.add(rect(5.9212668541511625e-09, 5.9212668541511625e-09).transl(1.1141102577601552e-07, -1.3910457147049982e-08, 0))
hIsland = hIsland.sub(rect(6.402600118750525e-09, 6.402600118750525e-09).transl(5.41587224834602e-08, 4e-08, 0))
hIsland = hIsland.add(rect(4.458439808569496e-09, 4.458439808569496e-09).transl(9.165527052908764e-08, -3.217846262609005e-08, 0))
hIsland = hIsland.sub(rect(9.026148787570396e-09, 9.026148787570396e-09).transl(4.351622420373414e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(7.58541716089559e-09, 7.58541716089559e-09).transl(1.0721837104510594e-07, 2.009379690789775e-08, 0))
hIsland = hIsland.add(rect(9.371243050972016e-09, 9.371243050972016e-09).transl(6.924449495041424e-08, 3.915673296537766e-08, 0))
hIsland = hIsland.sub(rect(8.709807009397302e-09, 8.709807009397302e-09).transl(8.36927949754735e-08, -3.5608881397600154e-08, 0))
hIsland = hIsland.sub(rect(3.5358156007722663e-09, 3.5358156007722663e-09).transl(-5.243585360205717e-08, 4e-08, 0))
hIsland = hIsland.add(rect(5.079531416645588e-10, 5.079531416645588e-10).transl(-4.3417724045506875e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(3.973262033752508e-09, 3.973262033752508e-09).transl(7.308026159583223e-08, 3.8503612253956234e-08, 0))
hIsland = hIsland.add(rect(4.686607085185671e-09, 4.686607085185671e-09).transl(7.319935441822815e-08, -3.8480195218827247e-08, 0))
hIsland = hIsland.sub(rect(7.104765515867592e-09, 7.104765515867592e-09).transl(-1.0944219007379966e-07, 1.7156803581189525e-08, 0))
hIsland = hIsland.add(rect(5.59230678385789e-09, 5.59230678385789e-09).transl(9.189142666996466e-08, -3.205650792641296e-08, 0))
hIsland = hIsland.sub(rect(6.583442032636458e-09, 6.583442032636458e-09).transl(6.583704536203305e-08, -3.9577312549372247e-08, 0))
hIsland = hIsland.add(rect(4.942540598048262e-10, 4.942540598048262e-10).transl(1.0069463470108057e-07, -2.6402484003344608e-08, 0))
hIsland = hIsland.add(rect(9.64836981157603e-10, 9.64836981157603e-10).transl(4.583031870954841e-08, -4e-08, 0))
hIsland = hIsland.add(rect(7.96093594087964e-09, 7.96093594087964e-09).transl(-7.20127463781212e-08, -3.870496539846225e-08, 0))
hIsland = hIsland.sub(rect(5.409866348899062e-09, 5.409866348899062e-09).transl(6.602381859362037e-08, -3.9558054684788643e-08, 0))
hIsland = hIsland.sub(rect(5.769588489095597e-09, 5.769588489095597e-09).transl(3.2011720573719714e-08, 4e-08, 0))
hIsland = hIsland.add(rect(8.654609655603187e-09, 8.654609655603187e-09).transl(-2.1401113042419576e-08, 4e-08, 0))
hIsland = hIsland.add(rect(4.673806257293208e-09, 4.673806257293208e-09).transl(1.6310313280084433e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(9.91642676032788e-09, 9.91642676032788e-09).transl(7.717421444258642e-08, -3.758566455478634e-08, 0))
hIsland = hIsland.sub(rect(4.674229953781975e-09, 4.674229953781975e-09).transl(-1.0740722973697387e-07, 1.9865936093040432e-08, 0))
hIsland = hIsland.add(rect(5.259700016965503e-09, 5.259700016965503e-09).transl(-2.7614635124605272e-08, -4e-08, 0))
hIsland = hIsland.add(rect(9.878781750417315e-09, 9.878781750417315e-09).transl(-6.802538486854211e-08, -3.9324142908241845e-08, 0))
hIsland = hIsland.add(rect(5.2877100515670574e-09, 5.2877100515670574e-09).transl(8.338323819647158e-08, 3.571825379357619e-08, 0))
hIsland = hIsland.add(rect(8.433467593112977e-09, 8.433467593112977e-09).transl(-9.920908574071744e-08, -2.7534139478151305e-08, 0))
hIsland = hIsland.sub(rect(3.77816261783493e-09, 3.77816261783493e-09).transl(1.2133191918004125e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(9.010174762429225e-09, 9.010174762429225e-09).transl(-6.964317998545483e-08, 3.9097837969786e-08, 0))
hIsland = hIsland.add(rect(7.300115878768809e-10, 7.300115878768809e-10).transl(-7.4366612530814226e-09, 4e-08, 0))
hIsland = hIsland.sub(rect(1.0588235094721066e-09, 1.0588235094721066e-09).transl(-6.611639977130677e-08, -3.954834708834149e-08, 0))
hIsland = hIsland.add(rect(9.593588564101013e-09, 9.593588564101013e-09).transl(-7.578639552807098e-08, -3.7923302886895216e-08, 0))
hIsland = hIsland.sub(rect(6.142876387202312e-09, 6.142876387202312e-09).transl(-9.262895362255223e-08, 3.166712779969378e-08, 0))
hIsland = hIsland.add(rect(6.375184203085721e-09, 6.375184203085721e-09).transl(9.237809431860251e-08, -3.1801033896589406e-08, 0))
hIsland = hIsland.add(rect(9.314116321606684e-09, 9.314116321606684e-09).transl(9.78486969280448e-08, -2.849825252459319e-08, 0))
hIsland = hIsland.add(rect(2.0101638217101302e-09, 2.0101638217101302e-09).transl(-5.433071601628192e-08, 4e-08, 0))
hIsland = hIsland.add(rect(4.923531670616205e-09, 4.923531670616205e-09).transl(-6.695978737395019e-08, 3.945496296470473e-08, 0))
hIsland = hIsland.add(rect(9.903945997929372e-09, 9.903945997929372e-09).transl(8.816965903334869e-08, 3.383489423129773e-08, 0))
hIsland = hIsland.add(rect(8.011813048795157e-09, 8.011813048795157e-09).transl(-9.209976974639033e-09, 4e-08, 0))
hIsland = hIsland.sub(rect(1.4398036559642213e-09, 1.4398036559642213e-09).transl(-2.499856700099319e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(1.4995461628128503e-09, 1.4995461628128503e-09).transl(-1.0303076947197379e-07, -2.4429171257677337e-08, 0))
hIsland = hIsland.sub(rect(4.928135973781301e-10, 4.928135973781301e-10).transl(-7.131480530094488e-08, 3.8828367807566615e-08, 0))
hIsland = hIsland.sub(rect(8.756340397883389e-09, 8.756340397883389e-09).transl(4.2943629568891066e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(8.47685628512076e-10, 8.47685628512076e-10).transl(9.220310884255864e-08, 3.1893541149895215e-08, 0))
hIsland = hIsland.sub(rect(3.04579742048529e-09, 3.04579742048529e-09).transl(8.953285273819951e-08, -3.321800205550299e-08, 0))
hIsland = hIsland.sub(rect(6.665173494339353e-09, 6.665173494339353e-09).transl(3.541867061297079e-08, 4e-08, 0))
hIsland = hIsland.add(rect(7.625831434336938e-10, 7.625831434336938e-10).transl(1.0966858830812662e-07, -1.6821099634305275e-08, 0))
vIsland := hIsland.rotz(pi / 2)
vIslands := Universe().Inverse()
hIslands := Universe().Inverse()
hIslands = hIslands.add(hIsland.transl(-a/2, a, 0))
hIslands = hIslands.add(hIsland.transl(-a/2, -a, 0))
hIslands = hIslands.add(hIsland.transl(a/2, a, 0))
hIslands = hIslands.add(hIsland.transl(a/2, -a, 0))
hIslands = hIslands.add(hIsland.transl(-a/2, 0, 0))
hIslands = hIslands.add(hIsland.transl(a/2, 0, 0))
vIslands = vIslands.add(vIsland.transl(-a, a/2, 0))
vIslands = vIslands.add(vIsland.transl(a, a/2, 0))
vIslands = vIslands.add(vIsland.transl(-a, -a/2, 0))
vIslands = vIslands.add(vIsland.transl(a, -a/2, 0))
vIslands = vIslands.add(vIsland.transl(0, a/2, 0))
vIslands = vIslands.add(vIsland.transl(0, -a/2, 0))
DefRegion(1, hIslands)
DefRegion(2, vIslands)
TableAdd(m_full.Region(1))
TableAdd(m_full.Region(2))
setgeom(hIslands.add(vIslands))
save(m)
r2o2 := sqrt(2) / 2
m = RandomMagSeed(4)
B_ext = vector(Bmax*r2o2, Bmax*r2o2, 0)
relax()
minimize()
for B := Bmax; B >= -Bmax; B -= Bstep {
	B_ext = vector(B*r2o2, B*r2o2, 0)
	minimize()
	tablesave()
}
//********************************************************************//
//Please cite the following references, relevant for your simulation. //
//See bibtex file in output folder for justification.                 //
//********************************************************************//
//   * Vansteenkiste et al., AIP Adv. 4, 107133 (2014).
//   * Exl et al., J. Appl. Phys. 115, 17D118 (2014).
