//mumax 3.10 [windows_amd64 go1.11.6(gc) CUDA-11.0]
//GPU info: NVIDIA GeForce RTX 3090(24575MB), CUDA Driver 11.7, cc=8.6, using cc=80 PTX
//(c) Arne Vansteenkiste, Dynamat LAB, Ghent University, Belgium
//This is free software without any warranty. See license.txt
//********************************************************************//
//  If you use mumax in any work or publication,                      //
//  we kindly ask you to cite the references in references.bib        //
//********************************************************************//
//output directory: r1;p0.5;a5.12e-07;l2.3000000000000002e-07;s2.out/
randSeed(2)
ThermSeed(2)
resolution := 2e-09
zResolution := 5e-09
a := 5.12e-07
gridSize := 512
gridDepth := 5
SetCellsize(resolution, resolution, zResolution)
SetGridsize(gridSize, gridSize, gridDepth)
SetPBC(16, 16, 0)
//resizing...
Msat = 700e3
Aex = 13e-12
alpha = 0.2
Bmax := 0.1
Bstep := Bmax / 500.0
TableAdd(B_ext)
TableAdd(m_full)
islandWidth := 8e-08
islandLength := 2.3000000000000002e-07
ellipseConstant := 5.7500000000000005e-08
hIsland := rect(islandLength-2*ellipseConstant, islandWidth)
hIsland = hIsland.add(ellipse(ellipseConstant*2, islandWidth).transl(islandLength/2-ellipseConstant, 0, 0))
hIsland = hIsland.add(ellipse(ellipseConstant*2, islandWidth).transl(-islandLength/2+ellipseConstant, 0, 0))
hIsland = hIsland.add(rect(3.160771228583271e-09, 3.160771228583271e-09).transl(-1.043843542323544e-07, 2.3157040763137507e-08, 0))
hIsland = hIsland.sub(rect(7.138561562558945e-09, 7.138561562558945e-09).transl(-5.968415954981741e-08, 3.997113179567976e-08, 0))
hIsland = hIsland.sub(rect(7.403398639909234e-09, 7.403398639909234e-09).transl(1.0707630464582894e-07, -2.0262952147211357e-08, 0))
hIsland = hIsland.add(rect(2.5590356274540407e-09, 2.5590356274540407e-09).transl(9.213431599306014e-08, 3.192970847477717e-08, 0))
hIsland = hIsland.sub(rect(8.52745475044198e-09, 8.52745475044198e-09).transl(-5.764408983841306e-08, 3.9999874408080893e-08, 0))
hIsland = hIsland.sub(rect(8.861096059533365e-09, 8.861096059533365e-09).transl(3.5273702958235337e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(8.598052508522722e-09, 8.598052508522722e-09).transl(1.3990823572282294e-08, 4e-08, 0))
hIsland = hIsland.add(rect(6.492057031993708e-09, 6.492057031993708e-09).transl(8.891446160848374e-08, 3.350257981978462e-08, 0))
hIsland = hIsland.add(rect(7.440301729510097e-09, 7.440301729510097e-09).transl(-1.0001970336942034e-07, 2.6927444180383792e-08, 0))
hIsland = hIsland.add(rect(7.722271636570595e-09, 7.722271636570595e-09).transl(6.165672024978743e-08, 3.9895343931275814e-08, 0))
hIsland = hIsland.sub(rect(7.780054693770098e-09, 7.780054693770098e-09).transl(-5.2837970150894736e-09, -4e-08, 0))
hIsland = hIsland.sub(rect(7.638773762444666e-09, 7.638773762444666e-09).transl(2.852101936606102e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(6.709035450559936e-09, 6.709035450559936e-09).transl(-8.406902715103324e-08, 3.5473737452455556e-08, 0))
hIsland = hIsland.sub(rect(3.275324665468181e-09, 3.275324665468181e-09).transl(-1.0784433703841903e-07, 1.9324833353457994e-08, 0))
hIsland = hIsland.add(rect(4.389816636629559e-09, 4.389816636629559e-09).transl(1.0978426859478318e-07, 1.6646380302294215e-08, 0))
hIsland = hIsland.add(rect(9.405470550707781e-09, 9.405470550707781e-09).transl(-8.144157131285167e-08, 3.6367716051286906e-08, 0))
hIsland = hIsland.sub(rect(7.830496184086518e-09, 7.830496184086518e-09).transl(6.12550269517013e-09, -4e-08, 0))
hIsland = hIsland.add(rect(5.948220860738583e-09, 5.948220860738583e-09).transl(-8.971597027103493e-08, 3.313219219437147e-08, 0))
hIsland = hIsland.sub(rect(3.6852022571416065e-09, 3.6852022571416065e-09).transl(-2.0391362140913344e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(6.301966050044017e-09, 6.301966050044017e-09).transl(2.322462411704978e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(2.902490018003867e-10, 2.902490018003867e-10).transl(-1.3561926317996446e-08, 4e-08, 0))
hIsland = hIsland.add(rect(6.467884043357922e-09, 6.467884043357922e-09).transl(-6.022358242673259e-09, 4e-08, 0))
hIsland = hIsland.add(rect(5.107804220721032e-09, 5.107804220721032e-09).transl(7.190961140360247e-08, 3.872360869432132e-08, 0))
hIsland = hIsland.add(rect(7.956011227946924e-09, 7.956011227946924e-09).transl(2.6841999242834767e-08, 4e-08, 0))
hIsland = hIsland.add(rect(7.890237689347746e-09, 7.890237689347746e-09).transl(-8.040909739110008e-09, 4e-08, 0))
hIsland = hIsland.sub(rect(6.090950447320506e-09, 6.090950447320506e-09).transl(7.911996185007696e-08, -3.706479729196868e-08, 0))
hIsland = hIsland.sub(rect(5.900675842358265e-09, 5.900675842358265e-09).transl(8.997278805817644e-08, -3.30106420700973e-08, 0))
hIsland = hIsland.add(rect(9.539596757424304e-09, 9.539596757424304e-09).transl(-3.0946613752936174e-08, -4e-08, 0))
hIsland = hIsland.add(rect(4.102338694460913e-09, 4.102338694460913e-09).transl(-9.170908922315241e-08, 3.215078436947185e-08, 0))
hIsland = hIsland.sub(rect(9.0018653074883e-09, 9.0018653074883e-09).transl(-2.921836515596004e-08, -4e-08, 0))
hIsland = hIsland.add(rect(1.5750393560339814e-09, 1.5750393560339814e-09).transl(-5.271619768203735e-08, 4e-08, 0))
hIsland = hIsland.add(rect(1.6681115516259914e-09, 1.6681115516259914e-09).transl(-6.49600646764796e-08, -3.966192060240047e-08, 0))
hIsland = hIsland.add(rect(9.170125818085416e-09, 9.170125818085416e-09).transl(7.877497910342414e-08, 3.716127595074666e-08, 0))
hIsland = hIsland.add(rect(5.042782492544003e-09, 5.042782492544003e-09).transl(9.370730020457257e-08, -3.107378989777843e-08, 0))
hIsland = hIsland.add(rect(2.529365359840584e-09, 2.529365359840584e-09).transl(-2.9297578999725873e-08, -4e-08, 0))
hIsland = hIsland.add(rect(6.52272533043145e-09, 6.52272533043145e-09).transl(1.8694434378451265e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(6.52198991010752e-09, 6.52198991010752e-09).transl(4.409570883943045e-08, -4e-08, 0))
hIsland = hIsland.add(rect(6.632449696596097e-09, 6.632449696596097e-09).transl(1.0673686837614025e-07, 2.0659590562205396e-08, 0))
hIsland = hIsland.sub(rect(7.346531465992911e-09, 7.346531465992911e-09).transl(-2.7492460731049215e-08, -4e-08, 0))
hIsland = hIsland.add(rect(1.7615434498515126e-09, 1.7615434498515126e-09).transl(-3.151992131435373e-09, -4e-08, 0))
hIsland = hIsland.sub(rect(4.654427716813376e-09, 4.654427716813376e-09).transl(3.247005027365004e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(8.51018512695787e-10, 8.51018512695787e-10).transl(4.9965982243509465e-08, -4e-08, 0))
hIsland = hIsland.add(rect(6.4633697675773664e-09, 6.4633697675773664e-09).transl(-2.256595689791922e-08, -4e-08, 0))
hIsland = hIsland.add(rect(9.033508922334832e-09, 9.033508922334832e-09).transl(3.798594919386877e-08, -4e-08, 0))
hIsland = hIsland.add(rect(3.5987084108243496e-09, 3.5987084108243496e-09).transl(1.0721636156889868e-07, -2.0096202861612427e-08, 0))
hIsland = hIsland.add(rect(4.623033476398764e-09, 4.623033476398764e-09).transl(-3.4000196496328904e-08, -4e-08, 0))
hIsland = hIsland.add(rect(9.553892632614312e-09, 9.553892632614312e-09).transl(7.978095584851438e-08, 3.6874874147566405e-08, 0))
hIsland = hIsland.sub(rect(7.090164543025201e-09, 7.090164543025201e-09).transl(-7.337382593578591e-08, -3.844554104889976e-08, 0))
hIsland = hIsland.sub(rect(9.179972411995574e-10, 9.179972411995574e-10).transl(9.02113767551595e-08, 3.28964478486503e-08, 0))
hIsland = hIsland.sub(rect(3.775352742815664e-09, 3.775352742815664e-09).transl(2.5856388207734726e-08, -4e-08, 0))
vIsland := hIsland.rotz(pi / 2)
vIslands := Universe().Inverse()
hIslands := Universe().Inverse()
hIslands = hIslands.add(hIsland.transl(-a/2, a, 0))
hIslands = hIslands.add(hIsland.transl(-a/2, -a, 0))
hIslands = hIslands.add(hIsland.transl(a/2, a, 0))
hIslands = hIslands.add(hIsland.transl(a/2, -a, 0))
hIslands = hIslands.add(hIsland.transl(-a/2, 0, 0))
hIslands = hIslands.add(hIsland.transl(a/2, 0, 0))
vIslands = vIslands.add(vIsland.transl(-a, a/2, 0))
vIslands = vIslands.add(vIsland.transl(a, a/2, 0))
vIslands = vIslands.add(vIsland.transl(-a, -a/2, 0))
vIslands = vIslands.add(vIsland.transl(a, -a/2, 0))
vIslands = vIslands.add(vIsland.transl(0, a/2, 0))
vIslands = vIslands.add(vIsland.transl(0, -a/2, 0))
DefRegion(1, hIslands)
DefRegion(2, vIslands)
TableAdd(m_full.Region(1))
TableAdd(m_full.Region(2))
setgeom(hIslands.add(vIslands))
save(m)
r2o2 := sqrt(2) / 2
m = RandomMagSeed(4)
B_ext = vector(Bmax*r2o2, Bmax*r2o2, 0)
relax()
minimize()
for B := Bmax; B >= -Bmax; B -= Bstep {
	B_ext = vector(B*r2o2, B*r2o2, 0)
	minimize()
	tablesave()
}
//********************************************************************//
//Please cite the following references, relevant for your simulation. //
//See bibtex file in output folder for justification.                 //
//********************************************************************//
//   * Vansteenkiste et al., AIP Adv. 4, 107133 (2014).
//   * Exl et al., J. Appl. Phys. 115, 17D118 (2014).
