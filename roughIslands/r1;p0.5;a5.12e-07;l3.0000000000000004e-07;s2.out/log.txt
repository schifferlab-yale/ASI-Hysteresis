//mumax 3.10 [windows_amd64 go1.11.6(gc) CUDA-11.0]
//GPU info: NVIDIA GeForce RTX 3090(24575MB), CUDA Driver 11.7, cc=8.6, using cc=80 PTX
//(c) Arne Vansteenkiste, Dynamat LAB, Ghent University, Belgium
//This is free software without any warranty. See license.txt
//********************************************************************//
//  If you use mumax in any work or publication,                      //
//  we kindly ask you to cite the references in references.bib        //
//********************************************************************//
//output directory: r1;p0.5;a5.12e-07;l3.0000000000000004e-07;s2.out/
randSeed(2)
ThermSeed(2)
resolution := 2e-09
zResolution := 5e-09
a := 5.12e-07
gridSize := 512
gridDepth := 5
SetCellsize(resolution, resolution, zResolution)
SetGridsize(gridSize, gridSize, gridDepth)
SetPBC(16, 16, 0)
//resizing...
Msat = 700e3
Aex = 13e-12
alpha = 0.2
Bmax := 0.1
Bstep := Bmax / 500.0
TableAdd(B_ext)
TableAdd(m_full)
islandWidth := 8e-08
islandLength := 3.0000000000000004e-07
ellipseConstant := 7.500000000000001e-08
hIsland := rect(islandLength-2*ellipseConstant, islandWidth)
hIsland = hIsland.add(ellipse(ellipseConstant*2, islandWidth).transl(islandLength/2-ellipseConstant, 0, 0))
hIsland = hIsland.add(ellipse(ellipseConstant*2, islandWidth).transl(-islandLength/2+ellipseConstant, 0, 0))
hIsland = hIsland.sub(rect(9.239122838622163e-09, 9.239122838622163e-09).transl(-5.796670965428085e-08, -4e-08, 0))
hIsland = hIsland.add(rect(3.191308744589547e-09, 3.191308744589547e-09).transl(-6.632539329594351e-09, -4e-08, 0))
hIsland = hIsland.sub(rect(5.961584605530703e-09, 5.961584605530703e-09).transl(-6.341490381456117e-09, 4e-08, 0))
hIsland = hIsland.sub(rect(7.310098366439722e-09, 7.310098366439722e-09).transl(-2.2607159437300753e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(5.992850175207539e-09, 5.992850175207539e-09).transl(6.230479457986284e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(2.0587332411283686e-09, 2.0587332411283686e-09).transl(5.328355562522673e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(2.122364023407689e-09, 2.122364023407689e-09).transl(-1.1276320537284595e-07, -3.455958979167359e-08, 0))
hIsland = hIsland.sub(rect(3.638651554577195e-09, 3.638651554577195e-09).transl(-1.3228733838383653e-07, -2.581664364942653e-08, 0))
hIsland = hIsland.sub(rect(9.476103597610963e-10, 9.476103597610963e-10).transl(1.4015192169212502e-07, 1.9814084147807085e-08, 0))
hIsland = hIsland.sub(rect(3.4700637560188886e-09, 3.4700637560188886e-09).transl(-5.308053338539174e-08, -4e-08, 0))
hIsland = hIsland.add(rect(1.4921876758871033e-09, 1.4921876758871033e-09).transl(2.23175471447913e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(1.0953989540661846e-09, 1.0953989540661846e-09).transl(-8.602242052021266e-08, -3.956566411176001e-08, 0))
hIsland = hIsland.sub(rect(8.440358696954468e-09, 8.440358696954468e-09).transl(-3.0274955714226804e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(7.980837639742265e-09, 7.980837639742265e-09).transl(2.603708438857491e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(6.884576260981318e-09, 6.884576260981318e-09).transl(1.413859930619615e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(2.2266273636278024e-09, 2.2266273636278024e-09).transl(1.0780118675560236e-07, 3.597167141176773e-08, 0))
hIsland = hIsland.add(rect(4.388427602237066e-10, 4.388427602237066e-10).transl(8.842387313820772e-09, 4e-08, 0))
hIsland = hIsland.sub(rect(4.566205542294132e-09, 4.566205542294132e-09).transl(-1.1258852594795429e-08, -4e-08, 0))
hIsland = hIsland.add(rect(6.32058361684267e-09, 6.32058361684267e-09).transl(1.2806961370205075e-07, 2.8264735035962865e-08, 0))
hIsland = hIsland.sub(rect(2.710218565319139e-09, 2.710218565319139e-09).transl(1.3893925171938972e-07, 2.090756521582339e-08, 0))
hIsland = hIsland.add(rect(5.804483890415868e-10, 5.804483890415868e-10).transl(1.1756082693529208e-07, 3.293555084824391e-08, 0))
hIsland = hIsland.add(rect(1.9174479881666218e-09, 1.9174479881666218e-09).transl(-8.126878157375429e-09, -4e-08, 0))
hIsland = hIsland.add(rect(1.4675009251431891e-09, 1.4675009251431891e-09).transl(-5.730462231955372e-08, 4e-08, 0))
hIsland = hIsland.add(rect(4.48761106935075e-09, 4.48761106935075e-09).transl(3.3061271677907657e-08, -4e-08, 0))
hIsland = hIsland.add(rect(7.451381472962583e-09, 7.451381472962583e-09).transl(5.0129384018030534e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(5.313310713403313e-09, 5.313310713403313e-09).transl(-1.984224020322321e-08, -4e-08, 0))
hIsland = hIsland.add(rect(3.438916893052578e-09, 3.438916893052578e-09).transl(8.25434842547206e-08, 3.9797159814859046e-08, 0))
hIsland = hIsland.add(rect(4.465696144827489e-09, 4.465696144827489e-09).transl(-8.298455205363791e-08, 3.9772676462570844e-08, 0))
hIsland = hIsland.add(rect(6.7517197512553606e-09, 6.7517197512553606e-09).transl(-1.062218424031067e-07, 3.6369253170785557e-08, 0))
hIsland = hIsland.add(rect(5.46476643467585e-10, 5.46476643467585e-10).transl(1.4491616298444785e-07, -1.4476145869219339e-08, 0))
hIsland = hIsland.sub(rect(2.513453435821461e-09, 2.513453435821461e-09).transl(-1.0961162946889636e-07, 3.5485849871776016e-08, 0))
hIsland = hIsland.add(rect(2.6086282627272517e-09, 2.6086282627272517e-09).transl(-6.814728794680697e-08, 4e-08, 0))
hIsland = hIsland.add(rect(7.013182369831719e-09, 7.013182369831719e-09).transl(-1.272316512708537e-07, 2.87052991432496e-08, 0))
hIsland = hIsland.add(rect(3.4072701997649658e-09, 3.4072701997649658e-09).transl(2.371042014389958e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(1.6239712748669622e-09, 1.6239712748669622e-09).transl(9.498144963469624e-08, -3.8554288818164524e-08, 0))
hIsland = hIsland.sub(rect(7.616267033609476e-09, 7.616267033609476e-09).transl(1.0419030994685696e-07, -3.6846061241827384e-08, 0))
hIsland = hIsland.add(rect(6.151508955303034e-09, 6.151508955303034e-09).transl(1.0219424789417575e-07, 3.727795085057878e-08, 0))
hIsland = hIsland.add(rect(1.1199811016703897e-09, 1.1199811016703897e-09).transl(6.851291806783694e-08, 4e-08, 0))
hIsland = hIsland.sub(rect(1.401795844285887e-09, 1.401795844285887e-09).transl(9.155180442181231e-08, 3.901375354663491e-08, 0))
hIsland = hIsland.add(rect(5.074737260557405e-10, 5.074737260557405e-10).transl(-8.916673571075392e-08, 3.927993156563995e-08, 0))
hIsland = hIsland.add(rect(7.953328583639065e-09, 7.953328583639065e-09).transl(9.109799357612185e-08, 3.90677300526879e-08, 0))
hIsland = hIsland.sub(rect(1.0008422117669202e-09, 1.0008422117669202e-09).transl(9.066082367262636e-08, 3.911824073079372e-08, 0))
hIsland = hIsland.sub(rect(8.894101014359377e-09, 8.894101014359377e-09).transl(-1.1571800045001076e-07, -3.359172147476466e-08, 0))
hIsland = hIsland.sub(rect(4.377514387077207e-09, 4.377514387077207e-09).transl(5.2645383387307336e-08, -4e-08, 0))
hIsland = hIsland.add(rect(9.80802215764615e-09, 9.80802215764615e-09).transl(1.023490470197294e-07, 3.7245724356268714e-08, 0))
hIsland = hIsland.add(rect(9.428990380684692e-09, 9.428990380684692e-09).transl(-1.2924570064348483e-07, -2.762236240187654e-08, 0))
hIsland = hIsland.add(rect(7.114346805373818e-09, 7.114346805373818e-09).transl(5.7932354916182314e-08, 4e-08, 0))
hIsland = hIsland.add(rect(7.78530231959831e-09, 7.78530231959831e-09).transl(-1.146749151363886e-07, -3.394490116978155e-08, 0))
hIsland = hIsland.add(rect(7.83020362441839e-09, 7.83020362441839e-09).transl(-2.9181145986742854e-08, -4e-08, 0))
hIsland = hIsland.sub(rect(5.7229495728068334e-09, 5.7229495728068334e-09).transl(-5.758531787246091e-09, 4e-08, 0))
vIsland := hIsland.rotz(pi / 2)
vIslands := Universe().Inverse()
hIslands := Universe().Inverse()
hIslands = hIslands.add(hIsland.transl(-a/2, a, 0))
hIslands = hIslands.add(hIsland.transl(-a/2, -a, 0))
hIslands = hIslands.add(hIsland.transl(a/2, a, 0))
hIslands = hIslands.add(hIsland.transl(a/2, -a, 0))
hIslands = hIslands.add(hIsland.transl(-a/2, 0, 0))
hIslands = hIslands.add(hIsland.transl(a/2, 0, 0))
vIslands = vIslands.add(vIsland.transl(-a, a/2, 0))
vIslands = vIslands.add(vIsland.transl(a, a/2, 0))
vIslands = vIslands.add(vIsland.transl(-a, -a/2, 0))
vIslands = vIslands.add(vIsland.transl(a, -a/2, 0))
vIslands = vIslands.add(vIsland.transl(0, a/2, 0))
vIslands = vIslands.add(vIsland.transl(0, -a/2, 0))
DefRegion(1, hIslands)
DefRegion(2, vIslands)
TableAdd(m_full.Region(1))
TableAdd(m_full.Region(2))
setgeom(hIslands.add(vIslands))
save(m)
r2o2 := sqrt(2) / 2
m = RandomMagSeed(4)
B_ext = vector(Bmax*r2o2, Bmax*r2o2, 0)
relax()
minimize()
for B := Bmax; B >= -Bmax; B -= Bstep {
	B_ext = vector(B*r2o2, B*r2o2, 0)
	minimize()
	tablesave()
}
//********************************************************************//
//Please cite the following references, relevant for your simulation. //
//See bibtex file in output folder for justification.                 //
//********************************************************************//
//   * Vansteenkiste et al., AIP Adv. 4, 107133 (2014).
//   * Exl et al., J. Appl. Phys. 115, 17D118 (2014).
